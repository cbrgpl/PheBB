(function(e){function t(t){for(var n,a,i=t[0],c=t[1],u=t[2],d=0,l=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);m&&m(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o={app:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-1a2030b1":"3656ca2b","chunk-1df19614":"0712d1cd","chunk-28fde8e8":"b355d2f3","chunk-2d0d34d3":"aa6044ab","chunk-2d21a3d2":"5dad77bd","chunk-326e86b6":"b44b02fd","chunk-5df9ba97":"3c03d2f1","chunk-5edac017":"a6224540","chunk-6c569234":"bca06e09","chunk-773b8282":"f8334828","chunk-db18c5b0":"c33f0038"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-1a2030b1":1,"chunk-1df19614":1,"chunk-28fde8e8":1,"chunk-5df9ba97":1,"chunk-6c569234":1,"chunk-773b8282":1,"chunk-db18c5b0":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-1a2030b1":"3f67d7ba","chunk-1df19614":"84df566a","chunk-28fde8e8":"dce643d8","chunk-2d0d34d3":"31d6cfe0","chunk-2d21a3d2":"31d6cfe0","chunk-326e86b6":"31d6cfe0","chunk-5df9ba97":"adaa265c","chunk-5edac017":"31d6cfe0","chunk-6c569234":"ea8c034b","chunk-773b8282":"bc7ebfa5","chunk-db18c5b0":"ead910b0"}[e]+".css",o=c.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===n||d===o))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===n||d===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],m.parentNode.removeChild(m),r(s)},m.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=s);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=i(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(m);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}o[e]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/PheBB/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var m=d;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"050f":function(e,t,r){e.exports=r.p+"img/8.d88c3ce3.svg"},"0972":function(e,t,r){},1620:function(e,t,r){e.exports=r.p+"img/1.1a06b8d3.svg"},"29ba":function(e,t,r){e.exports=r.p+"img/slider3.89075644.jpeg"},3520:function(e,t,r){"use strict";var n=r("e61b"),a=r.n(n);a.a},"4f7b":function(e,t,r){e.exports=r.p+"img/3.86a5e666.svg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.navVisible?r("vue-Header"):e._e(),r("main",{staticClass:"content"},[r("router-view")],1)],1)},o=[],s=r("5530"),i=r("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"header d-flex align-items-center"},[n("b-container",{attrs:{fluid:""}},[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"2"}},[n("h2",{staticClass:"d-flex align-items-center mb-0"},[n("router-link",{attrs:{tag:"span",to:{name:"Main"}}},[n("img",{staticClass:"header-logo",attrs:{src:r("ed4b"),alt:"Site Logo"}})]),n("span",{staticStyle:{"user-select":"none"}},[e._v("PheBB")])],1)]),e.checkRegCompletion?[n("b-col",{attrs:{offset:"2",cols:"8"}},[n("div",{staticClass:"d-flex justify-content-end align-items-center w-100"},[n("router-link",{staticClass:"header-link link p-1",attrs:{"active-class":"header-link--active",tag:"span",to:"/"}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"bag-check-fill"}}),n("span",[e._v("Заказы")])],1),n("router-link",{staticClass:"header-link link p-1",attrs:{"active-class":"header-link--active",tag:"span",to:"/"}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"tags-fill"}}),n("span",[e._v("Избранное")])],1),n("router-link",{staticClass:"header-link link p-1",attrs:{"active-class":"header-link--active",tag:"span",to:"/"}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"cart4"}}),n("span",[e._v("Корзина")])],1),n("span",{staticClass:"header-link link p-1",on:{click:function(t){e.isProfileMenuVisible=!e.isProfileMenuVisible}}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"house-fill"}}),n("span",[e._v(e._s(e.user.email))]),n("b-icon",{class:[{"header-profile-arrow--active":e.isProfileMenuVisible},"header-profile-arrow","ml-1"],attrs:{icon:"caret-right-fill"}})],1)],1)])]:[n("b-col",{staticClass:"mr-xl-2",attrs:{offset:"2"}},[n("b-row",{attrs:{"align-h":"end"}},[n("router-link",{staticClass:"header-link link p-1",attrs:{"active-class":"header-link--active",tag:"span",to:{name:"SignIn"}}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"person-circle"}}),n("span",[e._v("Авторизация")])],1),n("router-link",{staticClass:"header-link link p-1",attrs:{"active-class":"header-link--active",tag:"span",to:{name:"Registration"}}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"shift-fill"}}),n("span",[e._v("Регистрация")])],1)],1)],1)]],2)],1),e.checkRegCompletion?[n("nav",{class:[{"header-menu--visible":e.isProfileMenuVisible},"header-menu"]},[n("router-link",{staticClass:"header-menu-item",attrs:{tag:"div",to:"/"}},[n("b-icon-cpu",{staticClass:"mr-2"}),e._v(" Личный кабинет ")],1),n("router-link",{staticClass:"header-menu-item",attrs:{tag:"div",to:"/"}},[n("b-icon-chat-dots",{staticClass:"mr-2"}),e._v(" Сообщения ")],1),"admin"===e.userRole?n("router-link",{staticClass:"header-menu-item",attrs:{tag:"div",to:{name:"Admin"}}},[n("b-icon-chat-dots",{staticClass:"mr-2"}),e._v(" Админка ")],1):e._e(),n("div",{staticClass:"header-menu-item",on:{click:e.logout}},[n("b-icon-patch-minus",{staticClass:"mr-2"}),e._v(" Выход ")],1)],1)]:e._e()],2)},u=[],d={name:"TopNav",data:function(){return{isProfileMenuVisible:!1}},computed:Object(s["a"])({},Object(i["b"])(["checkRegCompletion","user","userRole"])),methods:{logout:function(){this.isProfileMenuVisible=!1,this.$store.dispatch("logoutUser")}}},l=d,m=(r("e9ed"),r("2877")),f=Object(m["a"])(l,c,u,!1,null,null,null),g=f.exports,h={name:"App",components:{vueHeader:g},computed:Object(s["a"])({},Object(i["b"])(["routeTo","navVisible"])),watch:{routeTo:function(){this.$router.push({name:this.routeTo})}},mounted:function(){this.$store.dispatch("ymapAction"),this.$router}},p=h,b=(r("5c0b"),Object(m["a"])(p,a,o,!1,null,null,null)),v=b.exports,k=(r("b0c0"),r("d3b7"),r("8c4f")),w={state:{loading:!1,error:null,routeTo:null,NavVisible:!0},mutations:{setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t},clearError:function(e){e.error=null},routeTo:function(e,t){e.routeTo=t},setNavVisible:function(e,t){e.NavVisible=t}},actions:{setLoading:function(e,t){var r=e.commit;r("setLoading",t)},setError:function(e,t){var r=e.commit;console.error(t),r("setError",t)},clearError:function(e){var t=e.commit;t("clearError")},setNavVisible:function(e,t){var r=e.commit;r("setNavVisible",t)}},getters:{loading:function(e){return e.loading},error:function(e){return e.error},isError:function(e){return null!==e.error},routeTo:function(e){return e.routeTo},navVisible:function(e){return e.NavVisible}}},x=(r("4160"),r("159b"),r("96cf"),r("1da1")),y=r("260b"),C=r("d4ec"),R=r("bee2"),E=function(){function e(t){var r=t.id,n=t.email,a=t.firebaseUser;Object(C["a"])(this,e),this.id=r,this.email=n,this.firebaseUser=a,this.firestoreData=null}return Object(R["a"])(e,[{key:"updateUserData",value:function(e){this.firestoreData=e}}]),e}(),_={state:{user:null,requestedUser:null,adminToken:null,requestedUsers:null},mutations:{setUser:function(e,t){e.user=new E({id:t.uid,email:t.email,firebaseUser:y["a"].auth().currentUser})},logoutUser:function(e,t){e.user=t},updateUserData:function(e,t){e.user.updateUserData(t)},setRequestedUser:function(e,t){var r=t.data,n=t.email;e.requestedUser=new E({id:void 0,email:n,firebaseUser:void 0}),e.requestedUser.updateUserData(r)},setAdminToken:function(e,t){e.adminToken=t},setRequestedUsers:function(e,t){e.requestedUsers=t}},actions:{registerUser:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.email,o=t.password,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,y["a"].auth().createUserWithEmailAndPassword(a,o);case 7:return s=r.sent,i=s.user,r.next=11,i.sendEmailVerification();case 11:n("setLoading",!1),r.next=19;break;case 14:throw r.prev=14,r.t0=r["catch"](4),n("setLoading",!1),n("setError",r.t0.message),r.t0;case 19:case"end":return r.stop()}}),r,null,[[4,14]])})))()},setUserFirestoreData:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,a=t.userData,o=t.email,n("clearError"),n("setLoading",!0),r.prev=4,s=y["a"].firestore(),a.role="user",s.collection("users").doc(o).set(a,{merge:!0}),n("updateUserData",a),n("setLoading",!1),r.next=17;break;case 12:throw r.prev=12,r.t0=r["catch"](4),n("setLoading",!1),n("setError",r.t0.message),r.t0;case 17:case"end":return r.stop()}}),r,null,[[4,12]])})))()},loggedUser:function(e,t){var r=e.commit;r("setUser",t),this.dispatch("updateUserData",t.email)},signIn:function(e,t){var r=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,o,s,i,c,u,d,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,o=t.email,s=t.password,i=t.remember,a("clearError"),a("setLoading",!0),n.prev=4,i){n.next=10;break}return n.next=8,y["a"].auth().setPersistence(y["a"].auth.Auth.Persistence.SESSION);case 8:n.next=12;break;case 10:return n.next=12,y["a"].auth().setPersistence(y["a"].auth.Auth.Persistence.LOCAL);case 12:return n.next=14,y["a"].auth().signInWithEmailAndPassword(o,s);case 14:if(c=n.sent,u=c.user,u.emailVerified){n.next=20;break}throw u.sendEmailVerification(),y["a"].auth().signOut(),{code:"auth/user-unverified"};case 20:return a("setUser",u),d=y["a"].firestore(),n.next=24,d.collection("users").doc(u.email).get();case 24:if(l=n.sent,console.log(l.exists,l.data()),l.exists){n.next=28;break}throw{code:"firestore/user-not-exists"};case 28:r.dispatch("updateUserData",u.email),a("setLoading",!1),n.next=37;break;case 32:throw n.prev=32,n.t0=n["catch"](4),a("setLoading",!1),a("setError",n.t0.code),n.t0;case 37:case"end":return n.stop()}}),n,null,[[4,32]])})))()},updateUserData:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=y["a"].firestore(),o=a.collection("users").doc(t),r.next=5,o.get();case 5:s=r.sent,i=s.data(),void 0!=i&&n("updateUserData",i);case 8:case"end":return r.stop()}}),r)})))()},logoutUser:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit,y["a"].auth().signOut(),r("logoutUser",null);case 3:case"end":return t.stop()}}),t)})))()},requestUserData:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,n("clearError"),n("setLoading",!0),r.prev=3,0!==t.length){r.next=6;break}throw{code:"validation/not-valid-email"};case 6:return a=y["a"].firestore(),r.next=9,a.collection("users").doc(t).get();case 9:if(o=r.sent,o.exists){r.next=12;break}throw{code:"firestore/user-not-exists"};case 12:n("setRequestedUser",{data:o.data(),email:t}),n("setLoading",!1),r.next=23;break;case 16:throw r.prev=16,r.t0=r["catch"](3),n("setLoading",!1),n("setError",r.t0.code),console.error("message ",r.t0.message),console.error("code ",r.t0.code),r.t0;case 23:case"end":return r.stop()}}),r,null,[[3,16]])})))()},getAdminToken:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,a=y["a"].firestore(),r.next=5,a.collection("tokens").where("email","==",t).get();case 5:if(o=r.sent,!o.empty){r.next=8;break}throw{code:"access-denided"};case 8:o.forEach((function(e){localStorage.setItem("amtoken",e.id),n("setAdminToken",e.id)})),r.next=15;break;case 11:throw r.prev=11,r.t0=r["catch"](1),n("setError",r.t0.code),r.t0;case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()},loadAllUsers:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearError"),r("setLoading",!0),t.prev=3,n=y["a"].firestore(),t.next=7,n.collection("users").where("role","!=","admin").get();case 7:if(a=t.sent,!a.empty){t.next=10;break}throw{code:"users-was-not-found"};case 10:o=[],a.forEach((function(e){var t=e.data();o.push({email:e.id,"Фамилия":t.fcs.secondName,"Имя":t.fcs.firstName,"Отчество":t.fcs.thirdName,"Роль":t.role})})),r("setRequestedUsers",o),r("setLoading",!1),t.next=21;break;case 16:throw t.prev=16,t.t0=t["catch"](3),r("setError",t.t0.code),r("setLoading",!1),t.t0;case 21:case"end":return t.stop()}}),t,null,[[3,16]])})))()},setUserRole:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.email,o=t.role,r.prev=2,s=y["a"].firestore(),i=s.collection("users").doc(a),r.next=7,i.set({role:o},{merge:!0});case 7:r.next=14;break;case 9:throw r.prev=9,r.t0=r["catch"](2),n("setError",r.t0.code),console.error(r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,9]])})))()}},getters:{user:function(e){return e.user},checkUser:function(e){return null!==e.user},checkRegCompletion:function(e){return!!e.user&&null!==e.user.firestoreData},requestedUser:function(e){return e.requestedUser},userRole:function(e){return e.user.firestoreData?e.user.firestoreData.role:null},adminToken:function(e){return e.adminToken},requestedUsers:function(e){return e.requestedUsers}}},q=r("f5ce"),D={state:{ymaps:Object},mutations:{setYmap:function(e,t){e.ymaps=t}},actions:{ymapAction:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Object(q["b"])(Object(s["a"])(Object(s["a"])({},{apiKey:"b3a57652-f985-4341-b678-6ab29a39d09a",lang:"ru_RU",coordorder:"latlong",controls:["geolocationControl"],version:"2.1"}),{},{debug:!0}));case 3:r("setYmap",ymaps);case 4:case"end":return t.stop()}}),t)})))()}},getters:{ymapsGet:function(e){return e.ymaps}}},j=(r("c975"),r("a434"),r("2909")),O={state:{categories:[],requestedParentCategory:null,findedCategoryID:null},mutations:{setCategories:function(e,t){e.categories=t},clearRequestedParentCategory:function(e){e.requestedParentCategory=null},setRequestedParentCategory:function(e,t){var r=t.name,n=t.id;e.requestedParentCategory={name:r,id:n}},setFindedCategoryID:function(e,t){e.findedCategoryID=t}},actions:{removeFromChildren:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.lastParentName,o=t.categoryID,r.prev=2,s=y["a"].firestore(),r.next=6,s.collection("categories").where("name","==",a).get();case 6:i=r.sent,i.forEach((function(e){var t=e.data().children,r=t.indexOf(o);t.splice(r,1),s.collection("categories").doc(e.id).set({children:t},{merge:!0})})),r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](2),n("setError",r.t0.code),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},addToChildren:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,a=t.newParentName,o=t.categoryID,r.prev=2,""!==a){r.next=6;break}return n("clearRequestedParentCategory"),r.abrupt("return");case 6:return s=y["a"].firestore(),r.next=9,s.collection("categories").where("name","==",a).get();case 9:i=r.sent,i.forEach((function(e){var t=e.data(),r=t.children;r.push.apply(r,Object(j["a"])(o)),n("setRequestedParentCategory",{name:t.name,id:e.id}),s.collection("categories").doc(e.id).set({children:r},{merge:!0})})),r.next=17;break;case 13:throw r.prev=13,r.t0=r["catch"](2),n("setError",r.t0.code),r.t0;case 17:case"end":return r.stop()}}),r,null,[[2,13]])})))()},updateCategory:function(e,t){var r=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,o,s,i,c,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,o=t.newParentName,s=t.categoryID,i=t.categoryNewName,n.prev=2,c=y["a"].firestore(),!(!r.getters.requestedParentCategory&""!==o)){n.next=13;break}return n.next=7,c.collection("categories").where("name","==",o).get();case 7:if(u=n.sent,!(u.empty&""!=o)){n.next=10;break}throw{code:"firestore/new-parent-does-not-exists"};case 10:r.dispatch("addToChildren",{newParentName:o,categoryID:s}),n.next=22;break;case 13:if(!r.getters.requestedParentCategory){n.next=22;break}if(r.getters.requestedParentCategory.name===o){n.next=22;break}return n.next=17,c.collection("categories").where("name","==",o).get();case 17:if(d=n.sent,!(d.empty&""!=o)){n.next=20;break}throw{code:"firestore/new-parent-does-not-exists"};case 20:r.dispatch("removeFromChildren",{lastParentName:r.getters.requestedParentCategory.name,categoryID:s}),r.dispatch("addToChildren",{newParentName:o,categoryID:s});case 22:c.collection("categories").doc(s).set({name:i},{merge:!0}),n.next=29;break;case 25:throw n.prev=25,n.t0=n["catch"](2),a("setError",n.t0.code),n.t0;case 29:case"end":return n.stop()}}),n,null,[[2,25]])})))()},requestCategories:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearError"),t.prev=2,n=y["a"].firestore(),a=[],t.next=7,n.collection("categories").get();case 7:o=t.sent,o.forEach((function(e){a.push({id:e.id,data:e.data()})})),r("setCategories",a),t.next=16;break;case 12:throw t.prev=12,t.t0=t["catch"](2),r("setError",t.t0.message),t.t0;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))()},createCategory:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c,u,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.parentName,o=t.categoryName,r.prev=2,s=y["a"].firestore(),r.next=6,s.collection("categories").where("name","==",o).get();case 6:if(i=r.sent,i.empty){r.next=9;break}throw{code:"firestore/category-already-exists"};case 9:return r.next=11,s.collection("categories").add({name:o,children:[]});case 11:return c=r.sent,r.next=14,s.collection("categories").where("name","==",a).get();case 14:if(u=r.sent,u.empty){r.next=20;break}return u.forEach((function(e){d=e.id,l=e.data().children})),l.push(c.id),r.next=20,s.collection("categories").doc(d).set({children:c.id},{merge:!0});case 20:r.next=26;break;case 22:throw r.prev=22,r.t0=r["catch"](2),n("setError",r.t0.code),r.t0;case 26:case"end":return r.stop()}}),r,null,[[2,22]])})))()},findCategoryParent:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,a=y["a"].firestore(),r.next=5,a.collection("categories").where("children","array-contains",t).get();case 5:if(o=r.sent,!o.empty){r.next=9;break}return n("clearRequestedParentCategory"),r.abrupt("return");case 9:o.forEach((function(e){n("setRequestedParentCategory",{name:e.data().name,id:e.id})})),r.next=16;break;case 12:throw r.prev=12,r.t0=r["catch"](1),n("setError",r.t0.code),r.t0;case 16:case"end":return r.stop()}}),r,null,[[1,12]])})))()},deleteCategory:function(e,t){var r=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,o=y["a"].firestore(),n.next=5,o.collection("categories").doc(t).get();case 5:return s=n.sent,i=s.data().children,n.next=9,o.collection("categories").where("children","array-contains",t).get();case 9:if(c=n.sent,!c.empty){n.next=13;break}return o.collection("categories").doc(s.id).delete().then((function(){r.dispatch("requestCategories")})),n.abrupt("return");case 13:c.forEach(function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.data(),e.next=3,r.dispatch("addToChildren",{newParentName:n.name,categoryID:i});case 3:return e.next=5,o.collection("categories").doc(s.id).delete();case 5:r.dispatch("requestCategories");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.next=20;break;case 16:throw n.prev=16,n.t0=n["catch"](1),a("setError",n.t0.code),n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,16]])})))()},setFirestoreListener:function(e){var t=this,r=e.commit;r("setLoading",!0);var n=y["a"].firestore();n.collection("categories").onSnapshot((function(){t.dispatch("requestCategories").then((function(){r("setLoading",!1)})).catch((function(e){r("setError",e.code),r("setLoading",!1)}))}))},findCategoryByName:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),r.prev=2,a=y["a"].firestore(),r.next=6,a.collection("categories").where("name","==",t).get();case 6:if(o=r.sent,!o.empty){r.next=9;break}throw{code:"category-does-not-exists"};case 9:o.forEach((function(e){n("setFindedCategoryID",e.id)})),r.next=16;break;case 12:throw r.prev=12,r.t0=r["catch"](2),n("setError",r.t0.code),r.t0;case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()}},getters:{categories:function(e){return e.categories},requestedParentCategory:function(e){return e.requestedParentCategory},findedCategoryID:function(e){return e.findedCategoryID}}},P=function(){function e(t){var r=t.categoryID,n=t.name,a=t.price,o=t.goodID;Object(C["a"])(this,e),this.categoryID=r,this.name=n,this.price=a,this.goodID=o}return Object(R["a"])(e,[{key:"toObject",value:function(){return{name:this.name,categoryID:this.categoryID,price:this.price,goodID:this.goodID}}}]),e}(),I={state:{requestedGood:null,requestedGoodsArray:[]},mutations:{addGoodToRequestedArray:function(e,t){var r=t.categoryID,n=t.name,a=t.price,o=t.id;e.requestedGoodsArray.push(new P({categoryID:r,name:n,price:a,goodID:o}))},clearRequstedGoodsArray:function(e){e.requestedGoodsArray=[]},setRequestedGood:function(e,t){var r=t.categoryID,n=t.name,a=t.price,o=t.id;e.requestedGood=new P({categoryID:r,name:n,price:a,goodID:o})},clearRequestedGood:function(e){e.requestedGood=null}},actions:{createGood:function(e,t){var r=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,o=t.categoryName,s=t.name,i=t.price,a("clearError"),a("setLoading",!0),n.prev=4,c=y["a"].firestore(),n.next=8,r.dispatch("findCategoryByName",o);case 8:return n.next=10,c.collection("goods").doc().add({categoryID:r.getters.findedCategoryID,name:s,price:i});case 10:a("setLoading",!1),n.next=18;break;case 13:throw n.prev=13,n.t0=n["catch"](4),a("setError",n.t0.code),a("setLoading",!1),n.t0;case 18:case"end":return n.stop()}}),n,null,[[4,13]])})))()},deleteGood:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,n("clearError"),n("setLoading",!0),r.prev=3,a=y["a"].firestore(),a.collection("goods").doc(t).delete(),n("setLoading",!1),r.next=14;break;case 9:throw r.prev=9,r.t0=r["catch"](3),n("setError",r.t0.code),n("setLoading",!1),r.t0;case 14:case"end":return r.stop()}}),r,null,[[3,9]])})))()},changeGood:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.goodID,o=t.newName,s=t.newPrice,i=t.newCategoryID,n("clearError"),n("setLoading",!0),r.prev=4,c=y["a"].firestore(),r.next=8,c.collection("goods").doc(a).set({categoryID:i,name:o,price:s},{merge:!0});case 8:n("setLoading",!1),r.next=16;break;case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.code),n("setLoading",!1),r.t0;case 16:case"end":return r.stop()}}),r,null,[[4,11]])})))()},requestGood:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),n("setLoading",!0),n("clearRequestedGood"),r.prev=4,a=y["a"].firestore(),r.next=8,a.collection("goods").doc(t).get();case 8:if(o=r.sent,o.exists){r.next=11;break}throw{code:"firestore/good-does-not-exists"};case 11:s=o.data(),n("setRequestedGood",{categoryID:s.categoryID,name:s.name,price:s.price,id:o.id}),n("setLoading",!1),r.next=21;break;case 16:throw r.prev=16,r.t0=r["catch"](4),n("setLoading",!1),n("setError",r.t0.code),r.t0;case 21:case"end":return r.stop()}}),r,null,[[4,16]])})))()},requestManyGoods:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),n("setLoading",!0),r.prev=3,a=y["a"].firestore(),r.next=7,t.forEach(function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.collection("goods").doc(t).get();case 2:r=e.sent,o=r.data(),n("addGoodToRequestedArray",{categoryID:o.categoryID,name:o.name,price:o.price,id:r.id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:n("setLoading",!1),r.next=15;break;case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.code),n("setLoading",!1),r.t0;case 15:case"end":return r.stop()}}),r,null,[[3,10]])})))()},clearRequestedGood:function(e){var t=e.commit;t("clearRequestedGood")},clearRequstedGoodsArray:function(e){var t=e.commit;t("clearRequstedGoodsArray")}},getters:{checkRequestedArrayEmpty:function(e){return 0!==e.requestedGoodsArray.length},checkRequestedGood:function(e){return null!==e.requestedGood},requestedGood:function(e){return e.requestedGood}}};n["default"].use(i["a"]);var U=new i["a"].Store({modules:{common:w,user:_,categories:O,good:I,ymaps:D}}),L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[r("slider",{attrs:{"slides-images-paths":e.sliderImagesPaths}}),r("div",{staticClass:"px-5"},[r("section",{staticClass:"goods-section"},[r("h2",{staticClass:"goods-section-title"},[e._v(" Популярные категории ")]),r("b-container",{attrs:{fluid:""}},[r("b-row",{attrs:{cols:"4"}},e._l(e.goodsCategories,(function(t){return r("b-col",{key:t.name},[r("div",{staticClass:"good-category mb-3 py-2"},[r("b-img",{staticStyle:{color:"red"},attrs:{src:t.path,height:"50",alt:t.name}}),r("h5",[e._v(e._s(t.name))])],1)])})),1)],1),r("div",{staticClass:"goods-section-items"})],1),r("section",{staticClass:"goods-section my-5"},[r("h2",{staticClass:"goods-section-title"},[e._v(" Топ просмотров ")]),r("div",{staticClass:"goods-section-items"},e._l(e.test,(function(e){return r("good-item",{key:e.id,staticClass:"main-goods-item",attrs:{"good-data":e}})})),1)]),r("section",{staticClass:"goods-section"},[r("h2",{staticClass:"goods-section-title"},[e._v(" Новые Товары ")]),r("div",{staticClass:"goods-section-items"},e._l(e.test,(function(e){return r("good-item",{key:e.id,staticClass:"main-goods-item",attrs:{"good-data":e}})})),1)])])],1)},A=[],N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"}},[r("b-carousel",{staticStyle:{"text-shadow":"1px 1px 2px #333"},attrs:{id:"carousel-1",interval:4e3,controls:"",indicators:"",background:"#ababab","img-width":"100%"},model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},e._l(e.slidesImagesPaths,(function(e){return r("b-carousel-slide",{key:e,attrs:{"img-src":e}})})),1)],1)},T=[],S={props:{slidesImagesPaths:{type:Array,required:!0}},data:function(){return{slide:0,sliding:null}},methods:{}},G=S,V=Object(m["a"])(G,N,T,!1,null,null,null),M=V.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"good-item"},[r("div",{staticClass:"good-item__cluster"},[r("img",{staticClass:"good-item__img",staticStyle:{width:"90%"},attrs:{src:e.goodData.imgPath,alt:e.goodData.imgAlt}}),r("b-icon",{staticClass:"good-item__bookmark",attrs:{icon:e.isAddedToBookmark?"bookmark-check":"bookmark-plus"}})],1),r("router-link",{staticClass:"good-item__title link",attrs:{to:"/"}},[r("h5",{},[e._v(" "+e._s(e.goodData.title)+" ")])]),r("h6",{staticClass:"good-item__location"},[r("b-icon-geo-alt-fill"),e._v(" "+e._s(e.goodData.location)+" ")],1),r("h6",{staticClass:"good-item__time"},[e._v(" "+e._s(e.goodData.time)+" ")]),r("div",{staticClass:"good-item__cluster"},[r("h3",{staticClass:"good-item__price"},[e._v(" "+e._s(e.goodData.price)+" "),r("span",{staticStyle:{color:"#aaa"}},[e._v(" ₽ ")])]),r("router-link",{attrs:{to:"/"}},[r("b-icon-arrow-right-square-fill",{staticClass:"good-item__arrow",attrs:{"font-scale":"1.75"}})],1)],1)],1)},$=[],F={props:{goodData:{type:Object,required:!0}},data:function(){return{isAddedToBookmark:!1}}},H=F,K=(r("3520"),Object(m["a"])(H,B,$,!1,null,null,null)),z=K.exports,J={name:"Main",components:{slider:M,goodItem:z},data:function(){return{test:[{title:"Товар 1",id:"14d0d",time:"14 ноября 19:65",imgPath:r("7864"),price:22356,holder:"noone",location:"Novosibirsk"},{title:"Товар 1",id:"14d30d",time:"14 ноября 19:65",imgPath:r("7864"),price:22356,holder:"noone",location:"Novosibirsk"},{title:"Товар 1",id:"142d0d",time:"14 ноября 19:65",imgPath:r("7864"),price:22356,holder:"noone",location:"Novosibirsk"}],sliderImagesPaths:[r("9d44"),r("baba"),r("29ba")],goodsCategories:[{name:"Процессоры",path:r("1620")},{name:"Мониторы",path:r("eefd")},{name:"Садовая техника",path:r("4f7b")},{name:"Ноутбуки",path:r("69e2")},{name:"Смартфоны",path:r("d75d")},{name:"Телевизоры",path:r("726b")},{name:"Стиральные машинки",path:r("e594")},{name:"Климатические приборы",path:r("050f")},{name:"Холодильники",path:r("5d70")},{name:"Компьютеры",path:r("6796")}]}}},W=J,Y=(r("a006"),Object(m["a"])(W,L,A,!1,null,null,null)),Z=Y.exports;n["default"].use(k["a"]);var Q=[{path:"/",component:Z,name:"Main"},{path:"/auth",component:function(){return r.e("chunk-6c569234").then(r.bind(null,"2fef"))},beforeEnter:function(e,t,r){var n="Auth"!==e.name;r(!!n||{name:"SignIn"})},children:[{name:"Registration",path:"registration",component:function(){return r.e("chunk-db18c5b0").then(r.bind(null,"501c"))},beforeEnter:function(e,t,r){U.dispatch("clearError"),r()}},{name:"SignIn",path:"sign-in",component:function(){return r.e("chunk-326e86b6").then(r.bind(null,"4f98"))},beforeEnter:function(e,t,r){U.dispatch("clearError"),r()}}]},{name:"RegCompletion",path:"/reg-completion",component:function(){return r.e("chunk-1a2030b1").then(r.bind(null,"018d"))},beforeEnter:function(e,t,r){U.getters.checkRegCompletion?r({name:"Home"}):r(!0)}},{path:"/home",component:function(){return r.e("chunk-2d21a3d2").then(r.bind(null,"bb51"))},name:"Home",beforeEnter:function(e,t,r){U.getters.checkUser?r():r({name:"Main"})}},{path:"/ampanel",component:function(){return r.e("chunk-5df9ba97").then(r.bind(null,"98ef"))},beforeEnter:function(e,t,r){var n=localStorage.getItem("amtoken");if(n)return e.params.token=n,void r();U.dispatch("getAdminToken",U.getters.user.email).then((function(){r(),localStorage.setItem("amtoken",U.getters.adminToken)})).catch((function(e){console.error(e),r({name:"Main"})}))},children:[{path:"users",component:function(){return r.e("chunk-28fde8e8").then(r.bind(null,"5294"))}},{name:"Admin",path:"categories",component:function(){return r.e("chunk-773b8282").then(r.bind(null,"f1e0"))}},{path:"goods",component:function(){return r.e("chunk-5edac017").then(r.bind(null,"8de8"))}},{path:"roles",component:function(){return r.e("chunk-1df19614").then(r.bind(null,"982e"))}}]},{path:"/*",component:function(){return r.e("chunk-2d0d34d3").then(r.bind(null,"5bd4"))}}],X=new k["a"]({mode:"history",base:"/PheBB/",routes:Q}),ee=X,te=r("5f5b"),re=r("b1e0"),ne=(r("ea7b"),r("e71f"),r("588e"),r("1dce")),ae=r.n(ne),oe=r("b6d0");r("f9e3"),r("2dd8");n["default"].use(te["a"]),n["default"].use(re["a"]),n["default"].use(q["a"],se),n["default"].use(ae.a),n["default"].use(oe["a"]);var se={apiKey:"b3a57652-f985-4341-b678-6ab29a39d09a",lang:"ru_RU",coordorder:"latlong",controls:["geolocationControl"],version:"2.1"};n["default"].config.productionTip=!1,new n["default"]({router:ee,store:U,created:function(){var e=this,t={apiKey:"AIzaSyCsPZmGdp1UIEnmL4A5ghIu-t2VR3u1U8w",authDomain:"vuebb-c0e49.firebaseapp.com",databaseURL:"https://vuebb-c0e49.firebaseio.com",projectId:"vuebb-c0e49",storageBucket:"vuebb-c0e49.appspot.com",messagingSenderId:"1033254387396",appId:"1:1033254387396:web:0d363d3e5c0ddb568f5391"};y["a"].initializeApp(t),y["a"].auth().onAuthStateChanged((function(t){t&&(t.emailVerified&&e.$store.dispatch("loggedUser",t))}))},render:function(e){return e(v)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"5d70":function(e,t,r){e.exports=r.p+"img/9.538e1134.svg"},6796:function(e,t,r){e.exports=r.p+"img/10.fec8d95c.svg"},"69e2":function(e,t,r){e.exports=r.p+"img/4.710eee51.svg"},"726b":function(e,t,r){e.exports=r.p+"img/6.d51d9036.svg"},7864:function(e,t,r){e.exports=r.p+"img/test1.8449e690.jpg"},"9c0c":function(e,t,r){},"9d44":function(e,t,r){e.exports=r.p+"img/slider1.818a15fb.jpeg"},a006:function(e,t,r){"use strict";var n=r("0972"),a=r.n(n);a.a},b520:function(e,t,r){},baba:function(e,t,r){e.exports=r.p+"img/slider2.350405f2.jpeg"},d75d:function(e,t,r){e.exports=r.p+"img/5.dcfbaab0.svg"},e594:function(e,t,r){e.exports=r.p+"img/7.cf3695b4.svg"},e61b:function(e,t,r){},e9ed:function(e,t,r){"use strict";var n=r("b520"),a=r.n(n);a.a},ed4b:function(e,t,r){e.exports=r.p+"img/logo.dbda5056.png"},eefd:function(e,t,r){e.exports=r.p+"img/2.afd402ca.svg"}});
//# sourceMappingURL=app.e1edb875.js.map